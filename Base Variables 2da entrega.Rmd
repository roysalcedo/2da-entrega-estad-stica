---
title: "2da Entrega"
author: '20163502'
date: "26/9/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

#Se abre la data y detalla la primera variable

```{r}
library(htmltab)
linkPage="https://en.wikipedia.org/wiki/List_of_countries_by_military_expenditure_per_capita" 
linkPath = "/html/body/div[3]/div[3]/div[5]/div[1]/table" 

gasto = htmltab(doc = linkPage, 
                     which =linkPath ) 
```

##Se limpian columnas de más 

```{r}
gasto=gasto[,-c(2:29)]
gasto=gasto[,-c(4:5)]
gasto$Pais = gasto$Country
gasto$PC2016 = gasto$`2016`
gasto$PC2017 = gasto$`2017`
gasto=gasto[,-c(1:3)]
```

###Se cambia el simbolo extraño

```{r}
gasto$Pais = gsub('Ã´',"o",gasto$Pais)
gasto$Pais = gsub('â€™',"’",gasto$Pais)
```

######Se excluyen los países que no aportaron datos, países que ya no existen, regiones que no conforman país, etc. (NA's)


```{r}
gasto=gasto[-c(2, 12, 17, 19, 22, 58, 80, 81, 82, 85, 98, 100, 105, 106, 116, 118, 130, 167, 169, 171, 172, 173), ]
```


###Convierten a numericas

```{r}
gasto$PC2016 = as.numeric(gasto$PC2016)
gasto=gasto[,-c(3)]

```


#Se abre la segunda data y segunda variable 


```{r}
personal <- read_excel("Personal Militar.xls")
View(personal)
```

###Se eliminan columnas de más

```{r}
personal=personal[,-c(2:60)]
personal=personal[,-c(4:5)]
personal=personal[,-c(3)]
```

###Filtro1: regiones autónomas, continentes, el mundo, en general lugares que no conforman país. Filtro2: países que no dieron data (NA's)

```{r}
personal=personal[-c(6, 35, 37, 48, 60, 61, 62, 63, 64, 67, 72, 73, 77, 78, 83, 90, 94, 95, 97, 101, 102, 103, 104, 106, 107, 109, 127, 133, 134, 135, 138, 139, 141, 145, 146, 152, 155, 160, 163, 169, 171, 180, 182, 190, 195, 196, 197, 198, 203, 214, 215, 216, 217, 224, 227, 229, 230, 235, 237, 239, 240, 248, 254, 255, 258), ]
personal=personal[-c(1, 5, 9, 10, 25, 30, 42, 46, 47, 52, 58, 74, 76, 97, 98, 104, 105, 106, 113, 116, 118, 137, 144, 147, 159, 162, 165, 170, 171, 179, 183, 190, 193, 194, 195), ]

```

###Modificacion en el nombre de las variables

```{r}
personal$Pais = personal$`Country Name`
personal$PM2016 = personal$`2016`
personal=personal[,-c(1:2)]
```

###Se convierte a numérica la variable

```{r}
personal$PM2016 = as.numeric(personal$PM2016)
```

###Se redondean decimales para hacer más sencillo el entendimiento

```{r}
personal$PM2016 = round(personal$PM2016, digits =2)
```


#Se realiza el MERGE de las bases


```{r}
names(gasto)
names(personal)
```

###Merge en base a variable en común
#*Se realiza este tipo de merge para no tomar en cuenta países de los cuales se tiene de data una sola de las variables, o ninguna

```{r}
total1=merge(gasto,personal,by.x='Pais', by.y='Pais') 
head(total1)
```

